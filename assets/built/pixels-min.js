$(function(){const n={name:"letter",el:".js-card-url"},e={load:"load"};let t={};const i=new URL(location.href),o=i.searchParams.get("s")||"direct",c=i.pathname.replace(/\/(.+)\//,"$1");let r=window.scrollY,s=(window.innerHeight,$("article").height(),!1);const a=$(".kg-image");function l(){let n=[].slice.call(arguments);const e=n.pop(),i=n.join("_"),o="https://improving.duckduckgo.com/t/blog_"+i;if(!(e&&e.once&&t[i]))if(e&&e.once&&(t[i]=!0),"sendBeacon"in navigator)navigator.sendBeacon(o);else{$("<img>").attr("src",o)}}let d={};function g(){a.each(function(){d[this.src]||(d[this.src]=this.src.split("/").pop()),function(n,e){e=e||!1;const t=n.getBoundingClientRect(),i=t.top,o=t.left,c=t.bottom,r=t.right,s=window.innerHeight,a=window.innerWidth;return e?(i>0&&i<s||c>0&&c<s)&&(o>0&&o<a||r>0&&r<a):i>=0&&o>=0&&c<=s&&r<=a}(this,!0)&&l("image",o,c,h(d[this.src]),{once:!0})}),s=!1}function h(n){return n.replace(/^\/|\/$/,"").replace(/[^a-z0-9_-]+/gi,"-").replace(/_/g,"-")}l(e.load,o,c,{once:!0}),window.addEventListener("scroll",function(){r=window.scrollY,s||requestAnimationFrame(g),s=!0},{passive:!0}),g(),$(".js-newsletter").one("submit",function(e){l(n.name,o,c,{once:!0})}),$("article a").click(function(){const n=h(this.href);l("link",o,c,n,{once:!1})})});